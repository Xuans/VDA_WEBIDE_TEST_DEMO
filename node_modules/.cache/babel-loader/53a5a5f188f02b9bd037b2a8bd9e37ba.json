{"remainingRequest":"/Users/lijiancheng/Agree/Vue0815/node_modules/babel-loader/lib/index.js!/Users/lijiancheng/Agree/Vue0815/node_modules/eslint-loader/index.js??ref--13-0!/Users/lijiancheng/Agree/Vue0815/src/main.js","dependencies":[{"path":"/Users/lijiancheng/Agree/Vue0815/src/main.js","mtime":1565848515370},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"/Users/lijiancheng/Agree/Vue0815/node_modules/core-js/modules/es6.array.iterator.js\";\nimport \"/Users/lijiancheng/Agree/Vue0815/node_modules/core-js/modules/es6.promise.js\";\nimport \"/Users/lijiancheng/Agree/Vue0815/node_modules/core-js/modules/es6.object.assign.js\";\nimport \"/Users/lijiancheng/Agree/Vue0815/node_modules/core-js/modules/es7.promise.finally.js\";\n// import 'babel-polyfill'   //如果需要兼容到IE9就打开\nimport Vue from 'vue';\nimport App from \"./App\";\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\nimport ElementUI from 'element-ui';\nimport \"../theme/index.css\";\nimport \"./api/index.js\";\nimport router from \"./router\";\nimport Lib from '@v2-lib/vue.spa.plugin';\nimport store from \"./store\";\nVue.use(Lib);\nVue.use(ElementUI);\nVue.directive('focus', {\n  // 当被绑定的元素插入到 DOM 中时……\n  inserted: function inserted(el) {\n    // 聚焦元素\n    el.focus();\n  }\n});\nVue.config.productionTip = false;\nrouter.beforeEach(function (to, from, next) {\n  NProgress.start();\n  var wpath = window.location.hash.split('?')[0].replace('#/', '');\n  var routes = router.options.routes;\n\n  if (localStorage.getItem('openWindow') && localStorage.getItem('openWindow') === wpath) {\n    routes.push({\n      path: '/' + wpath,\n      component: Lib._import(wpath),\n      hidden: true\n    });\n    router.addRoutes(routes);\n  }\n\n  var urlParam = window.location.hash.split('?')[1];\n\n  if (wpath && urlParam && urlParam.indexOf('IDE') !== -1) {\n    var hasIn = routes[0].children.some(function (item) {\n      return item.path === '/' + wpath;\n    }); //判断是否存在路由表里\n\n    if (!routes.filter(function (r) {\n      return r.type === 'preview';\n    }).length) {\n      if (!hasIn) {\n        routes[0].children.push({\n          path: '/' + wpath,\n          replace: true,\n          component: Lib._import(wpath),\n          meta: {\n            title: '预览',\n            type: 'preview'\n          }\n        });\n        router.addRoutes(routes);\n      } else {\n        routes[0].children.map(function (item) {\n          if (item.path === '/' + wpath) {\n            item.meta.type = 'preview';\n            item.meta.title = '预览';\n          }\n        });\n      }\n\n      next();\n    }\n  } else {\n    if (to.path == '/login') {\n      sessionStorage.removeItem('user');\n    }\n\n    var user = JSON.parse(sessionStorage.getItem('user'));\n\n    if (!user && to.path != '/login') {\n      next({\n        path: '/login'\n      });\n    } else {\n      next();\n    }\n  }\n});\nrouter.afterEach(function () {\n  // 在即将进入新的页面组件前，关闭掉进度条\n  NProgress.done();\n});\nnew Vue({\n  router: router,\n  store: store,\n  render: function render(h) {\n    return h(App);\n  }\n}).$mount('#app');",{"version":3,"sources":["/Users/lijiancheng/Agree/Vue0815/src/main.js"],"names":["Vue","App","NProgress","ElementUI","router","Lib","store","use","directive","inserted","el","focus","config","productionTip","beforeEach","to","from","next","start","wpath","window","location","hash","split","replace","routes","options","localStorage","getItem","push","path","component","_import","hidden","addRoutes","urlParam","indexOf","hasIn","children","some","item","filter","r","type","length","meta","title","map","sessionStorage","removeItem","user","JSON","parse","afterEach","done","render","h","$mount"],"mappings":"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","sourcesContent":["// import 'babel-polyfill'   //如果需要兼容到IE9就打开\nimport Vue from 'vue'\nimport App from './App'\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\nimport ElementUI from 'element-ui'\nimport '../theme/index.css'\nimport './api/index.js';\nimport  router from './router'\n\nimport Lib from  '@v2-lib/vue.spa.plugin'\nimport store from './store'\n\nVue.use(Lib)\nVue.use(ElementUI)\nVue.directive('focus', {\n  // 当被绑定的元素插入到 DOM 中时……\n  inserted: function (el) {\n    // 聚焦元素\n    el.focus()\n  }\n})\n\nVue.config.productionTip = false;\n\nrouter.beforeEach((to, from, next) => {\n  NProgress.start();\n  let wpath = window.location.hash.split('?')[0].replace('#/', '');\n  let routes= router.options.routes\n  if (localStorage.getItem('openWindow') && localStorage.getItem('openWindow') === wpath) {\n    routes.push({\n      path: '/' + wpath,\n      component: Lib._import(wpath),\n      hidden: true\n    });\n    router.addRoutes(routes);\n  }\n  \n  let urlParam = window.location.hash.split('?')[1];\n\n  if (wpath && urlParam && urlParam.indexOf('IDE') !== -1) {\n    let hasIn=routes[0].children.some((item)=>item.path==='/'+wpath); //判断是否存在路由表里\n    if (!routes.filter(r => r.type === 'preview').length) {\n      if(!hasIn){\n        routes[0].children.push({\n          path: '/'+wpath,\n          replace: true,\n          component: Lib._import(wpath),\n          meta: {\n            title: '预览',\n            type: 'preview'\n          }\n           });\n        router.addRoutes(routes);\n      }else{\n        routes[0].children.map((item) => {\n          if (item.path === '/'+wpath) {\n              item.meta.type = 'preview';\n              item.meta.title = '预览';\n          }\n        });\n      }\n\n     \n      next();\n    }\n  }else{\n\n    if (to.path == '/login') {\n      sessionStorage.removeItem('user');\n    }\n    let user = JSON.parse(sessionStorage.getItem('user'));\n  \n    \n    if (!user && to.path != '/login') {\n      next({\n        path: '/login'\n      })\n    } else {\n        next()\n    }\n\n  }\n  \n   \n})\n\nrouter.afterEach(() => {\n  // 在即将进入新的页面组件前，关闭掉进度条\n  NProgress.done()\n})\n\nnew Vue({\n  router,\n  store,\n  render: h => h(App)\n}).$mount('#app')"]}]}