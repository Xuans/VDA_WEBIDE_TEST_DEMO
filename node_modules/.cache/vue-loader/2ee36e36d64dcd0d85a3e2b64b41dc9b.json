{"remainingRequest":"/Users/lijiancheng/Agree/Vue0815/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lijiancheng/Agree/Vue0815/src/views/Login.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/lijiancheng/Agree/Vue0815/src/views/Login.vue","mtime":1565848515392},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/less-loader/dist/cjs.js","mtime":1565848667485},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.cus-submit-btn {\n  width: 100%;\n}\n.cus-login-container {\n  /*box-shadow: 0 0px 8px 0 rgba(0, 0, 0, 0.06), 0 1px 0px 0 rgba(0, 0, 0, 0.02);*/\n  -webkit-border-radius: 5px;\n  border-radius: 5px;\n  -moz-border-radius: 5px;\n  background-clip: padding-box;\n  margin: 180px auto;\n  width: 350px;\n  padding: 35px 35px 15px 35px;\n  background: #fff;\n  border: 1px solid #eaeaea;\n  box-shadow: 0 0 25px #cac6c6;\n  .cus-identifying-code {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 5;\n    width: 102px; /*设置图片显示的宽*/\n    height: 40px; /*图片显示的高*/\n    background: #e2e2e2;\n    margin: 0;\n  }\n  .cus-title {\n    margin: 0px auto 40px auto;\n    text-align: center;\n    color: #505458;\n  }\n  .cus-remember {\n    float: left;\n  }\n\n  .cus-forget-passWord {\n    float: right;\n  }\n}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <el-form\n    :model=\"ruleForm\"\n    :rules=\"rules\"\n    ref=\"ruleForm\"\n    label-position=\"left\"\n    label-width=\"0px\"\n    class=\"demo-ruleForm cus-login-container\"\n  >\n    <h3 class=\"cus-title\">赞同管理系统</h3>\n    <el-form-item prop=\"account\">\n      <el-input type=\"text\" v-model=\"ruleForm.account\" auto-complete=\"off\" placeholder=\"账号\"></el-input>\n    </el-form-item>\n    <el-form-item prop=\"checkPass\">\n      <el-input type=\"password\" v-model=\"ruleForm.checkPass\" auto-complete=\"off\" placeholder=\"密码\"></el-input>\n    </el-form-item>\n\n    <el-form-item prop=\"identifyCode\">\n      <div class=\"cus-code-input\">\n        <el-input class=\"input\" maxlength=\"8\" placeholder=\"请输入验证码\" v-model=\"ruleForm.identifyCode\"></el-input>\n        <div class=\"cus-identifying-code\" @click=\"getIdentifyingCode(true)\">\n          <img\n            style=\"height:40px; width: 100px; cursor: pointer;\"\n            alt=\"点击更换\"\n            :src=\"identifyCodeSrc\"\n            title=\"点击更换\"\n          />\n        </div>\n      </div>\n    </el-form-item>\n\n    <el-form-item style=\"width:100%;\">\n      <el-button\n        type=\"primary\"\n        class=\"cus-submit-btn\"\n        native-type=\"submit\"\n        @click.native.prevent=\"handleSubmit\"\n        :loading=\"logining\"\n      >登录</el-button>\n    </el-form-item>\n    <!-- <el-form-item style=\"width:100%;\">\n      <el-checkbox v-model=\"checked\" class=\"cus-remember\" text-color=\"#771faa\">记住密码</el-checkbox>\n      <el-button type=\"text\" class=\"cus-forget-passWord\">忘记密码</el-button>\n    </el-form-item>-->\n  </el-form>\n</template>\n\n<script>\nimport { requestLogin,verifyImage } from \"@/api/api\";\nimport  {mixins} from '@v2-lib/vue.spa.plugin';\nexport default {\n  mixins:[mixins],\n  data() {\n    return {\n      identifyCodeSrc: verifyImage,\n      logining: false,\n      ruleForm: {\n        account: \"admin123\",\n        checkPass: \"\",\n        identifyCode: \"\"\n      },\n      rules: {\n        account: [\n          { required: true, message: \"请输入账号\", trigger: \"blur\" }\n          //{ validator: validaePass }\n        ],\n        checkPass: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" }\n          //{ validator: validaePass2 }\n        ],\n        identifyCode: [\n          { required: true, message: \"请输入验证码\", trigger: \"blur\" }\n          //{ validator: validaePass2 }\n        ]\n      },\n      checked: false\n    };\n  },\n  created() {},\n  methods: {\n    handleReset() {\n      this.$refs.ruleForm.resetFields();\n    },\n    getIdentifyingCode: function(bRefresh) {\n      if (bRefresh) {\n        this.identifyCodeSrc = `${verifyImage}?${Math.random()}`;\n      }\n    },\n\n    getMenu: function(list) {\n      var context = this;\n      let menus = [],\n        menuObj = {},\n        menuParent = {},\n        result = list || [];\n\n      if (result.length) {\n        result\n          .sort((a, b) => {\n            return parseInt(a.seq, 10) - parseInt(b.seq, 10);\n          })\n          .map(i => {\n            !i.pid && (i.pid = \"\");\n            let p = menuObj[i.pid];\n            if (!p) {\n              p = menuObj[i.pid] = {\n                id: i.pid,\n                children: []\n              };\n            } else {\n              !p.children && (p.children = []);\n            }\n            let item = menuObj[i.id] || {\n              id: i.id\n            };\n            item.pid = i.pid || \"\";\n            item.name = i.id;\n            item.path = i.id;\n            item.component = i.value;\n            item.meta = { title: i.name, icon: i.icon };\n            menuObj[i.id] = item;\n            p.children.push(item);\n          });\n\n        Object.keys(menuObj)\n          .filter(e => !menuObj[e].children)\n          .map(e => delete menuObj[e]);\n\n        return menuObj[\"\"].children;\n      }\n    },\n\n    handleSubmit(ev) {\n      var _this = this;\n      this.$refs.ruleForm.validate(valid => {\n        if (valid) {\n          var loginParams = {\n            username: this.ruleForm.account,\n            password: this.ruleForm.checkPass,\n            checkCode: this.ruleForm.identifyCode\n          };\n          this.logining = true;\n          requestLogin(loginParams)\n            .then(response => {\n              this.logining = false;\n              if (response.status && response.content) {\n                window.localStorage.setItem(\n                  \"ctoken\",\n                  response.content.result || \"\"\n                );\n                sessionStorage.setItem(\n                  \"user\",\n                  JSON.stringify({\n                    name: this.ruleForm.account,\n                    avatar: \"./img/user.png\"\n                  })\n                );\n                _this.$store.state.openedTabs = [];\n                _this.$router.push({ path: \"/\" });\n  \n              } else {\n                _this.$notify({\n                  title: \"登录失败\",\n                  message: response.errorMsg,\n                  type: \"error\"\n                });\n              }\n            })\n            .catch(err => {\n              this.logining = false;\n              this.$notify({\n                title: \"登录失败\",\n                message: err.errorMsg,\n                type: \"error\"\n              });\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    }\n  }\n};\n</script>\n\n <style lang=\"less\" >\n.cus-submit-btn {\n  width: 100%;\n}\n.cus-login-container {\n  /*box-shadow: 0 0px 8px 0 rgba(0, 0, 0, 0.06), 0 1px 0px 0 rgba(0, 0, 0, 0.02);*/\n  -webkit-border-radius: 5px;\n  border-radius: 5px;\n  -moz-border-radius: 5px;\n  background-clip: padding-box;\n  margin: 180px auto;\n  width: 350px;\n  padding: 35px 35px 15px 35px;\n  background: #fff;\n  border: 1px solid #eaeaea;\n  box-shadow: 0 0 25px #cac6c6;\n  .cus-identifying-code {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 5;\n    width: 102px; /*设置图片显示的宽*/\n    height: 40px; /*图片显示的高*/\n    background: #e2e2e2;\n    margin: 0;\n  }\n  .cus-title {\n    margin: 0px auto 40px auto;\n    text-align: center;\n    color: #505458;\n  }\n  .cus-remember {\n    float: left;\n  }\n\n  .cus-forget-passWord {\n    float: right;\n  }\n}\n</style>"]}]}