{"remainingRequest":"/Users/lijiancheng/Agree/Vue0815/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lijiancheng/Agree/Vue0815/src/components/markdown/markdown.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/lijiancheng/Agree/Vue0815/src/components/markdown/markdown.vue","mtime":1565848515397},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/sass-loader/lib/loader.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*引入reset文件*/\n\n@import \"./css/reset\";\n\n/*引入github的markdown样式文件*/\n\n@import \"./css/github-markdown.css\";\n\n/*引入atom的代码高亮样式文件*/\n\n@import \"./css/atom-one-dark.min.css\";\n.mdContainer {\n    width: 100%;\n    height: 100%;\n    background: lightblue;\n    &.fullPage {\n        position: fixed;\n        z-index: 1000;\n        left: 0;\n        top: 0;\n    }\n    .navContainer {\n        width: 100%;\n        height: 36px;\n        background: #fff;\n        box-sizing: border-box;\n        border-bottom: 1px solid #eee;\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        padding: 0 10px;\n        .nameContainer {\n            color: lightblue;\n            margin-right: 10px;\n            cursor:pointer;\n        }\n        .markContainer {\n            width: auto;\n            height: 100%;\n            margin-left: 0px;\n            ul.markListGroup {\n                height: 100%;\n                width: auto;\n                display: flex;\n                justify-content: flex-start;\n                align-items: center;\n                li.markListItem {\n                    list-style: none;\n                    width: 20px;\n                    height: 20px;\n                    margin: 0 2px;\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    cursor: pointer;\n                    font-size: 12px;\n                    color: #333;\n                    &:hover {\n                        background: #eee;\n                    }\n                }\n            }\n        }\n    }\n    .mdBodyContainer {\n        width: 100%;\n        height: calc(100% - 36px);\n        background: #fff;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        box-sizing: border-box;\n        &.noMenu{\n            height: 100%;\n        }\n    }\n}\n\n// 编辑区域\n.editContainer {\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    border-right: 1px solid #ddd;\n    background: #333;\n    color: #fff;\n    padding: 10px;\n    .mdEditor {\n        height: 100%;\n        width: 100%;\n        background: transparent;\n        outline: none;\n        color: #fff;\n        resize: none;\n    }\n}\n\n// 预览区\n.previewContainer {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    background: #fff;\n    overflow: auto;\n    padding: 10px;\n}\n",{"version":3,"sources":["markdown.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwRA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"markdown.vue","sourceRoot":"src/components/markdown","sourcesContent":["<template>\n    <div class=\"mdContainer\" :class=\"{ fullPage: fullPageStatus }\">\n        <div class=\"navContainer\" v-if=\"navStatus\">\n         \n            <div class=\"markContainer\">\n                <ul class=\"markListGroup\">\n                    <li class=\"markListItem\" @click=\"addStrong\" title=\"strong\"><b>B</b></li>\n                    <li class=\"markListItem\" @click=\"addItalic\" title=\"italic\"><i>I</i></li>\n                    <li class=\"markListItem\" @click=\"addStrikethrough\" title=\"strikethrough\"><i class=\"fa fa-strikethrough\" aria-hidden=\"true\"></i></li>\n                    <li class=\"markListItem\" @click=\"addHTitle(1)\" title=\"H1-title\">H1</li>\n                    <li class=\"markListItem\" @click=\"addHTitle(2)\" title=\"H2-title\">H2</li>\n                    <li class=\"markListItem\" @click=\"addHTitle(3)\" title=\"H3-title\">H3</li>\n                    <li class=\"markListItem\" @click=\"addHTitle(4)\" title=\"H4-title\">H4</li>\n                    <li class=\"markListItem\" @click=\"addHTitle(5)\" title=\"H5-title\">H5</li>\n                    <li class=\"markListItem\" @click=\"addHTitle(6)\" title=\"H6-title\">H6</li>\n                    <li class=\"markListItem\" @click=\"addLine\" title=\"line\">一</li>\n                    <li class=\"markListItem\" @click=\"addQuote\" title=\"quote\"><i class=\"fa fa-quote-left\" aria-hidden=\"true\"></i></li>\n                    <li class=\"markListItem\" @click=\"addCode\"><i class=\"fa fa-code\" aria-hidden=\"true\"></i></li>\n                    <li class=\"markListItem\" @click=\"addLink\"><i class=\"fa fa-link\" aria-hidden=\"true\"></i></li>\n                    <li class=\"markListItem\" @click=\"addImage\"><i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i></li>\n                    <li class=\"markListItem\" @click=\"addTable\" title=\"table\"><i class=\"fa fa-table\" aria-hidden=\"true\"></i></li>\n                    <li class=\"markListItem\" @click=\"addUl\" title=\"ul-list\"><i class=\"fa fa-list-ul\" aria-hidden=\"true\"></i></li>\n                    <li class=\"markListItem\" @click=\"addOl\" title=\"ol-list\"><i class=\"fa fa-list-ol\" aria-hidden=\"true\"></i></li>\n                    <li class=\"markListItem\" @click=\"fullPageFn\" title=\"fullpage\"><i class=\"fa fa-arrows-alt\" aria-hidden=\"true\"></i></li>\n                    <li class=\"markListItem\" @click=\"previewFn\" title=\"preview\"><i class=\"fa fa-eye-slash\" aria-hidden=\"true\"></i></li>\n                    <li class=\"markListItem\" @click=\"previewAllFn\" title=\"previewAll\"><i class=\"fa fa-eye\" aria-hidden=\"true\"></i></li>\n                </ul>\n    \n            </div>\n        </div>\n        <div class=\"mdBodyContainer\" :class=\"{ noMenu: !navStatus }\">\n            <div class=\"editContainer\" v-if=\"editStatus\">\n                <textarea name=\"\" class=\"mdEditor\" @keydown.9=\"tabFn\" v-scroll=\"editScroll\" v-model=\"input\"></textarea>\n            </div>\n            <div class=\"previewContainer markdown-body\" v-scroll=\"previewScroll\" v-html=\"compiledMarkdown\" v-if=\"previewStatus\">\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import Vue from 'vue'\n    import marked from 'marked'\n    import scroll from 'vue-scroll'\n    import hljs from './js/highlight.min.js'\n    import range from './js/rangeFn.js'\n    Vue.use(scroll)\n    marked.setOptions({\n        renderer: new marked.Renderer(),\n        gfm: true,\n        tables: true,\n        breaks: false,\n        pedantic: false,\n        sanitize: true,\n        smartLists: true,\n        smartypants: false,\n        highlight: function(code) {\n            return hljs.highlightAuto(code).value\n        }\n    });\n    \n    function insertContent(val, that) {\n        let textareaDom = document.querySelector('.mdEditor');\n        let value = textareaDom.value;\n        let point = range.getCursortPosition(textareaDom);\n        let lastChart = value.substring(point - 1, point);\n        let lastFourCharts = value.substring(point - 4, point);\n        if (lastChart != '\\n' && value != '' && lastFourCharts != '    ') {\n            val = '\\n' + val;\n            range.insertAfterText(textareaDom, val);\n        } else {\n            range.insertAfterText(textareaDom, val);\n        }\n        that.input = document.querySelector('.mdEditor').value;\n    }\n    export default {\n        name: 'markdown',\n        props: ['mdValuesP', 'fullPageStatusP', 'editStatusP', 'previewStatusP', 'navStatusP', 'icoStatusP'],\n        data() {\n            return {\n                input: this.mdValuesP || '',\n                editStatus: Boolean(this.editStatusP),\n                previewStatus: Boolean(this.previewStatusP),\n                fullPageStatus: Boolean(this.fullPageStatusP),\n                navStatus: Boolean(this.navStatusP),\n                icoStatus: Boolean(this.icoStatusP),\n                maxEditScrollHeight:0,\n                maxPreviewScrollHeight:0\n            }\n        },\n        created: function() {\n            if (!this.editStatus && !this.previewStatus) {\n                this.editStatus = true;\n                this.previewStatus = true;\n            }\n        },\n        methods: {\n            tabFn: function(evt) {\n                insertContent(\"    \", this);\n                // 屏蔽屌tab切换事件\n                if (evt.preventDefault) {\n                    evt.preventDefault();\n                } else {\n                    evt.returnValue = false;\n                }\n            },\n            addImage: function(evt) {\n                \n                insertContent(\"![Vue](https://cn.vuejs.org/images/logo.png)\", this);\n            },\n            addHTitle: function(index) {\n                let tmp = '';\n                switch (index) {\n                    case 1:\n                        tmp = '# ';\n                        break;\n                    case 2:\n                        tmp = '## ';\n                        break;\n                    case 3:\n                        tmp = '### ';\n                        break;\n                    case 4:\n                        tmp = '#### ';\n                        break;\n                    case 5:\n                        tmp = '##### ';\n                        break;\n                    case 6:\n                        tmp = '###### ';\n                        break;\n                    default:\n                        break;\n                }\n                insertContent(tmp, this);\n            },\n            addCode: function() {\n                let textareaDom = document.querySelector('.mdEditor');\n                let value = textareaDom.value;\n                let point = range.getCursortPosition(textareaDom);\n                let lastChart = value.substring(point - 1, point);\n                insertContent('```\\n\\n```', this);\n                if (lastChart != '\\n' && value != '') {\n                    range.setCaretPosition(textareaDom, point + 5);\n                } else {\n                    range.setCaretPosition(textareaDom, point + 4);\n                }\n            },\n            addStrikethrough: function() {\n                let textareaDom = document.querySelector('.mdEditor');\n                let value = textareaDom.value;\n                let point = range.getCursortPosition(textareaDom);\n                let lastChart = value.substring(point - 1, point);\n                insertContent('~~~~', this);\n                if (lastChart != '\\n' && value != '') {\n                    range.setCaretPosition(textareaDom, point + 3);\n                } else {\n                    range.setCaretPosition(textareaDom, point + 2);\n                }\n            },\n            addStrong: function() {\n                let textareaDom = document.querySelector('.mdEditor');\n                let value = textareaDom.value;\n                let point = range.getCursortPosition(textareaDom);\n                let lastChart = value.substring(point - 1, point);\n                insertContent('****', this);\n                if (lastChart != '\\n' && value != '') {\n                    range.setCaretPosition(textareaDom, point + 3);\n                } else {\n                    range.setCaretPosition(textareaDom, point + 2);\n                }\n            },\n            addItalic: function() {\n                let textareaDom = document.querySelector('.mdEditor');\n                let value = textareaDom.value;\n                let point = range.getCursortPosition(textareaDom);\n                let lastChart = value.substring(point - 1, point);\n                insertContent('**', this);\n                if (lastChart != '\\n' && value != '') {\n                    range.setCaretPosition(textareaDom, point + 2);\n                } else {\n                    range.setCaretPosition(textareaDom, point + 1);\n                }\n            },\n            setStrong: function() {\n                let textareaDom = document.querySelector('.mdEditor');\n                let point = range.getCursortPosition(textareaDom);\n            },\n            addLine: function() {\n                insertContent('\\n----\\n', this);\n            },\n            addLink: function() {\n                insertContent(\"[Vue](https://cn.vuejs.org/images/logo.png)\", this);\n            },\n            addQuote: function() {\n                let textareaDom = document.querySelector('.mdEditor');\n                let value = textareaDom.value;\n                let point = range.getCursortPosition(textareaDom);\n                let lastChart = value.substring(point - 1, point);\n                insertContent('> ', this);\n                if (lastChart != '\\n' && value != '') {\n                    range.setCaretPosition(textareaDom, point + 3);\n                } else {\n                    range.setCaretPosition(textareaDom, point + 2);\n                }\n            },\n            addTable: function() {\n                insertContent('\\nheader 1 | header 2\\n', this);\n                insertContent('---|---\\n', this);\n                insertContent('row 1 col 1 | row 1 col 2\\n', this);\n                insertContent('row 2 col 1 | row 2 col 2\\n\\n', this);\n            },\n            addUl: function() {\n                insertContent('* ', this);\n            },\n            addOl: function() {\n                insertContent('1. ', this);\n            },\n            previewFn: function() {\n                if (!this.editStatus) {\n                    this.editStatus = true;\n                    this.previewStatus = !this.previewStatus;\n                } else {\n                    this.previewStatus = !this.previewStatus;\n                }\n            },\n            previewAllFn: function() {\n                if (!this.editStatus && this.previewStatus) {\n                    this.editStatus = true;\n                    this.previewStatus = true;\n                } else {\n                    this.editStatus = false;\n                    this.previewStatus = true;\n                }\n            },\n            fullPageFn: function() {\n                this.fullPageStatus = !this.fullPageStatus;\n                let maxEditScrollHeight=document.querySelector('.mdEditor').scrollHeight-document.querySelector('.mdEditor').clientHeight;\n                let maxPreviewScrollHeight=document.querySelector('.previewContainer').scrollHeight-document.querySelector('.previewContainer').clientHeight;\n                this.maxEditScrollHeight = maxEditScrollHeight\n                this.maxPreviewScrollHeight = maxPreviewScrollHeight\n            },\n            previewScroll: function(e, position) {\n                if(this.maxEditScrollHeight!==0){\n                    let topPercent=position.scrollTop/this.maxPreviewScrollHeight;\n                    document.querySelector('.mdEditor').scrollTop = this.maxEditScrollHeight*topPercent;\n                }\n            },\n            editScroll:function(e, position){\n                if(this.maxPreviewScrollHeight!==0){\n                    let topPercent=position.scrollTop/this.maxEditScrollHeight;\n                    document.querySelector('.previewContainer').scrollTop = this.maxPreviewScrollHeight*topPercent;\n                }\n            }\n        },\n        computed: {\n            compiledMarkdown: function() {\n                return marked(this.input, {\n                    sanitize: true\n                })\n            }\n        },\n        watch: {\n            input: function() {\n                let data = {};\n                data.mdValue = this.input;\n                data.htmlValue = marked(this.input, {\n                    sanitize: true\n                });\n                this.$emit('childevent', data);\n                let maxEditScrollHeight=document.querySelector('.mdEditor').scrollHeight-document.querySelector('.mdEditor').clientHeight;\n                let maxPreviewScrollHeight=document.querySelector('.previewContainer').scrollHeight-document.querySelector('.previewContainer').clientHeight;\n                this.maxEditScrollHeight = maxEditScrollHeight\n                this.maxPreviewScrollHeight = maxPreviewScrollHeight\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\">\n    /*引入reset文件*/\n    \n    @import \"./css/reset\";\n    \n    /*引入github的markdown样式文件*/\n    \n    @import \"./css/github-markdown.css\";\n    \n    /*引入atom的代码高亮样式文件*/\n    \n    @import \"./css/atom-one-dark.min.css\";\n    .mdContainer {\n        width: 100%;\n        height: 100%;\n        background: lightblue;\n        &.fullPage {\n            position: fixed;\n            z-index: 1000;\n            left: 0;\n            top: 0;\n        }\n        .navContainer {\n            width: 100%;\n            height: 36px;\n            background: #fff;\n            box-sizing: border-box;\n            border-bottom: 1px solid #eee;\n            display: flex;\n            justify-content: flex-start;\n            align-items: center;\n            padding: 0 10px;\n            .nameContainer {\n                color: lightblue;\n                margin-right: 10px;\n                cursor:pointer;\n            }\n            .markContainer {\n                width: auto;\n                height: 100%;\n                margin-left: 0px;\n                ul.markListGroup {\n                    height: 100%;\n                    width: auto;\n                    display: flex;\n                    justify-content: flex-start;\n                    align-items: center;\n                    li.markListItem {\n                        list-style: none;\n                        width: 20px;\n                        height: 20px;\n                        margin: 0 2px;\n                        display: flex;\n                        justify-content: center;\n                        align-items: center;\n                        cursor: pointer;\n                        font-size: 12px;\n                        color: #333;\n                        &:hover {\n                            background: #eee;\n                        }\n                    }\n                }\n            }\n        }\n        .mdBodyContainer {\n            width: 100%;\n            height: calc(100% - 36px);\n            background: #fff;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            box-sizing: border-box;\n            &.noMenu{\n                height: 100%;\n            }\n        }\n    }\n    \n    // 编辑区域\n    .editContainer {\n        height: 100%;\n        width: 100%;\n        box-sizing: border-box;\n        border-right: 1px solid #ddd;\n        background: #333;\n        color: #fff;\n        padding: 10px;\n        .mdEditor {\n            height: 100%;\n            width: 100%;\n            background: transparent;\n            outline: none;\n            color: #fff;\n            resize: none;\n        }\n    }\n    \n    // 预览区\n    .previewContainer {\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n        background: #fff;\n        overflow: auto;\n        padding: 10px;\n    }\n</style>"]}]}