{"remainingRequest":"/Users/lijiancheng/Agree/Vue0815/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lijiancheng/Agree/Vue0815/src/views/Layout.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/lijiancheng/Agree/Vue0815/src/views/Layout.vue","mtime":1565848515392},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/less-loader/dist/cjs.js","mtime":1565848667485},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lijiancheng/Agree/Vue0815/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.aweb-container {\n  position: absolute;\n  top: 0px;\n  bottom: 0px;\n  width: 100%;\n  background-color: #f0f2f5;\n  .aweb-header {\n    line-height: 64px;\n    background: #fff;\n    height: 64px;\n    box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);\n    border-right: none;\n    border-bottom: 1px solid #e6e6e6;\n    list-style: none;\n    position: relative;\n    margin: 0;\n    padding-left: 0;\n    .aweb-userinfo {\n      text-align: right;\n      padding-right: 35px;\n      float: right;\n      .aweb-userinfo-inner {\n        cursor: pointer;\n        img {\n          width: 40px;\n          height: 40px;\n          border-radius: 20px;\n          margin: 10px 0px 10px 10px;\n          float: right;\n        }\n      }\n      .aweb-download-btn{\n        margin-right: 1em;\n      }\n    }\n    .aweb-logo {\n      height: 64px;\n      font-size: 22px;\n      padding-left: 20px;\n      padding-right: 20px;\n      img {\n        width: 40px;\n        float: left;\n        margin: 10px 10px 10px 18px;\n      }\n      .txt {\n        color: rgb(14, 9, 9);\n      }\n    }\n    .logo-width,\n    .logo-collapse-width {\n      background-color: #152028;\n      color: #fff;\n      box-shadow: 2px 0 6px rgba(0,21,41,.35);  \n      transition: width .28s;\n      }\n      .logo-collapse-width {\n        width: 64px;\n      }\n      .logo-width {\n      width: 230px;\n      }\n    .aweb-tools {\n      padding: 0px 23px;\n      width: 14px;\n      height: 64px;\n      line-height: 64px;\n      cursor: pointer;\n    }\n  }\n  .aweb-body {\n    position: absolute;\n    top: 64px;\n    bottom: 0px;\n    overflow: hidden;\n    aside {\n\t  width: 230px;\n\t\tbox-shadow: 2px 0 6px rgba(0,21,41,.35);\n    transition: width .28s;\n    //  position:absolute;\n    height: 100%;\n      .el-menu {\n      height: 100%;\n      border-right: 0;\n  \n      \n      }\n      a.router-link-exact-active.router-link-active{\n        text-decoration: none;\n      }\n      .el-menu-item{\n         &:hover{\n            i{\n                color: #fff;\n            }\n         }\n         &.is-active:hover{\n             color: #fff !important;\n         }\n      }\n      .el-submenu{\n           [class*=\"fa \"]{\n           \n            margin-right: 9px;\n            font-size: 18px;\n            margin-left: 4px;\n           }\n          &:hover{\n            .el-submenu__title i{\n               color: #fff;\n            } \n          }\n      }\n    }\n    .menu-collapsed {\n    \n      width: 64px;\n      transition: width .28s;\n      &+.aweb-ctt{\n        margin-left: 64px;\n        transition: margin-left .5s;\n      }\n    }\n    .menu-expanded {\n    \n      width: 230px;\n       transition: width .5s;\n       &+.aweb-ctt{\n        margin-left: 230px;\n        transition: margin-left .28s;;\n      }\n    }\n\n  }\n   .aweb-ctt {\n  \n      overflow: auto;\n      padding: 10px;\n      margin-left: 230px;\n      position: absolute;\n      left: 0;\n      right: 0;\n      top:0;\n      .breadcrumb-container {\n        .title {\n          width: 200px;\n          float: left;\n          color: #475669;\n        }\n        .breadcrumb-inner {\n          float: right;\n        }\n      }\n      .aweb-ctt-wrap {\n        background-color: #fff;\n        box-sizing: border-box;\n        padding:20px;\n      }\n      .grid-content{\n           >div>div.el-tabs>.el-tabs__content{\n              height: calc(100vh - 125px);\n              overflow: auto;\n              padding: 0;\n           }\n           .el-tabs__item:focus, \n           .el-tabs__item:focus:active,\n           .el-tabs__item:active:focus{\n                 outline: none;\n                outline-color: transparent;\n           }\n      }\n     \n    }\n    .el-menu-vertical-demo:not(.el-menu--collapse) {\n    width: 230px;\n    min-height: 400px;\n  }\n}\n",{"version":3,"sources":["Layout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Layout.vue","sourceRoot":"src/views","sourcesContent":["\t<template>\n  <el-row class=\"aweb-container\"  ref=\"layout\" name=\"layout\">\n    <el-col :span=\"24\" class=\"aweb-header\">\n      <el-col\n        :span=\"10\"\n        class=\"aweb-logo\"\n        :class=\"collapsed?'logo-collapse-width':'logo-width'\"\n      >{{collapsed?'':sysName}}</el-col>\n      <el-col :span=\"10\">\n        <div class=\"aweb-tools\" @click.prevent=\"collapse\">\n          <i class=\"el-icon-menu\"></i>\n        </div>\n      \n      </el-col>\n\n      <el-col :span=\"6\" class=\"aweb-userinfo\">\n\n        <el-tooltip  effect=\"dark\" content=\"下载后端案例\" placement=\"top\">\n            <el-button icon=\"el-icon-sold-out\" circle class=\"aweb-download-btn\" @click=\"openMarket('end')\"></el-button>\n        </el-tooltip>\n\n        <el-tooltip  effect=\"dark\" content=\"下载前端案例\" placement=\"top\">\n            <el-button icon=\"el-icon-sold-out\" circle class=\"aweb-download-btn\" @click=\"openMarket('font')\"></el-button>\n        </el-tooltip>\n\n        <el-tooltip  effect=\"dark\" content=\"后台接口文档\" placement=\"top\">\n            <el-button icon=\"el-icon-sold-out\" circle class=\"aweb-download-btn\" @click=\"openMarket('endDoc')\"></el-button>\n        </el-tooltip>\n\n\n        <el-dropdown trigger=\"hover\">\n          <span class=\"el-dropdown-link aweb-userinfo-inner\">\n            <img :src=\"sysUserAvatar\">\n            {{sysUserName}}\n          </span>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item>我的消息</el-dropdown-item>\n            <el-dropdown-item>设置</el-dropdown-item>\n            <el-dropdown-item divided @click.native=\"logout\">退出登录</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </el-col>\n    </el-col>\n\n    <el-col :span=\"24\" class=\"aweb-body\">\n <!-- 侧边导航 -->\n      <aside :class=\"collapsed?'menu-collapsed':'menu-expanded'\">\n\n        <el-menu        \n          default-active=\"2\"\n          class=\"el-menu-vertical-demo\"\n          background-color=\"#152028\"\n          text-color=\"#fff\"\n          :collapse=\"collapsed\"\n          @select=\"handleSelectMenu\"\n        >\n\n          <template v-for=\"item in routerData\" v-if=\"!item.hidden\">\n            \n              <el-submenu  v-if=\"item.children && item.children.length && !item.isLeaf || (item.isLeaf && item.isRedirect)\" :index=\"item.path+'#'+item.componentUrl+'#'+(item.meta && item.meta.title && item.meta.title)\" :key=\"item.path\">\n                <template slot=\"title\">\n                  <i v-if=\"item.meta && item.meta.icon\" :class=\"item.meta.icon\"></i>\n                  <span v-if=\"item.meta && item.meta.title\">{{item.meta.title}}</span>\n                </template>\n\n                <template v-for=\"child in item.children\" v-if=\"!child.hidden\">\n\n                      <el-submenu  v-if=\"child.children\" :index=\"item.path+'/'+child.path+'#'+child.componentUrl+'#'+(child.meta && child.meta.title && child.meta.title)\" :key=\"item.path+'/'+child.path\">\n                              \n                                    <template slot=\"title\">\n                                      <i v-if=\"child.meta && child.meta.icon\" :class=\"child.meta.icon\"></i>\n                                      <span v-if=\"child.meta && child.meta.title\">{{child.meta.title}}</span>\n                                    </template>\n\n                                    <template v-for=\"child3 in child.children\" v-if=\"!child3.hidden\">\n\n                                            <el-submenu  v-if=\"child3.children\" :index=\"item.path+'/'+child.path+'/'+child3.path+'#'+child3.componentUrl+'#'+(child3.meta && child3.meta.title && child3.meta.title)\" :key=\"item.path+'/'+child.path+'/'+child3.path\">                              \n                                                    <template slot=\"title\">\n                                                      <i v-if=\"child3.meta && child3.meta.icon\" :class=\"child3.meta.icon\"></i>\n                                                      <span v-if=\"child3.meta && child3.meta.title\">{{child3.meta.title}}</span>\n                                                    </template>\n\n                                                    <template v-for=\"child4 in child3.children\" v-if=\"!child4.hidden\">                                         \n                                                          <el-menu-item :index=\"item.path+'/'+child.path+'/'+child3.path+'/'+child4.path+'#'+child4.componentUrl+'#'+(child4.meta && child4.meta.title && child4.meta.title)\" :key=\"item.path+'/'+child.path+'/'+child3.path+'/'+child4.path\">\n                                                            <i v-if=\"child4.meta && child4.meta.icon\" :class=\"child4.meta.icon\"></i>\n                                                            <span v-if=\"child4.meta&&child4.meta.title\">{{child4.meta.title}}</span>\n                                                          </el-menu-item>\n                                                    </template>                             \n                                              </el-submenu>\n\n\n                                          <el-menu-item v-else :index=\"item.path+'/'+child.path+'/'+child3.path+'#'+child3.componentUrl+'#'+(child3.meta && child3.meta.title && child3.meta.title)\" :key=\"item.path+'/'+child.path+'/'+child3.path\">\n                                            <i v-if=\"child3.meta && child3.meta.icon\" :class=\"child3.meta.icon\"></i>\n                                            <span v-if=\"child3.meta&&child3.meta.title\">{{child3.meta.title}}</span>\n                                          </el-menu-item>\n\n\n                                    </template>\n                              \n                      </el-submenu>\n\n\n                    <el-menu-item v-else  :index=\"item.path+'/'+child.path+'#'+child.componentUrl+'#'+(child.meta && child.meta.title && child.meta.title)\" :key=\"item.path+'/'+child.path\">\n                      <i v-if=\"child.meta && child.meta.icon\" :class=\"child.meta.icon\"></i>\n                      <span v-if=\"child.meta && child.meta.title\" :data-role=\"item.path+'/'+child.path\">{{child.meta.title}}</span>\n                    </el-menu-item>\n            \n                </template>\n              </el-submenu>\n\n             \n                <el-menu-item  v-else-if=\"item.isLeaf && !item.children[0].children\"  :index=\"item.children[0].path+'#'+item.children[0].componentUrl+'#'+(item.children[0].meta && item.children[0].meta.title && item.children[0].meta.title)\" :key=\"item.path+'/'+item.children[0].path\" >  \n                  <i v-if=\"item.children[0].meta && item.children[0].meta.icon\" :class=\"item.children[0].meta.icon\"></i>          \n                    <span v-if=\"item.children[0].meta && item.children[0].meta.title\">{{item.children[0].meta.title}}</span>\n                  </el-menu-item>\n\n                 <el-menu-item  v-else  :index=\"item.path+'#'+item.componentUrl+'#'+(item.meta && item.meta.title && item.meta.title)\" :key=\"item.path\" >  \n                  <i v-if=\"item.meta && item.meta.icon\" :class=\"item.meta.icon\"></i>          \n                    <span v-if=\"item.meta && item.meta.title\">{{item.meta.title}}</span>\n                  </el-menu-item>\n\n\n            </template>        \n        </el-menu>\n      </aside>\n <!-- 侧边导航-->\n      <section class=\"aweb-ctt\">\n        <div class=\"grid-content bg-purple-light\">\n          <div>\n  \n            <el-tabs\n              v-model=\"activeIndex\"\n              type=\"border-card\"\n              closable\n\n              v-if=\"openedTabs.length\"\n              @tab-click=\"tabClick\"\n              @tab-remove=\"tabRemove\"\n\n              @contextmenu.native=\"tabRightClick\"\n            >\n   \n              <el-tab-pane\n                :key=\"item.name\"\n                v-for=\"item in openedTabs\"\n                :label=\"item.name\"\n                :name=\"item.route\"\n                :route=\"item.route\"\n              >\n              <el-col :span=\"24\" class=\"aweb-ctt-wrap\" >\n        \n                <transition name=\"fade\" mode=\"out-in\"> \n                 \n                      <!-- <router-view  ></router-view> -->\n                     <keep-alive v-if=\"isRouterAlive\">                           \n                          <router-view  v-if=\"(activeIndex===item.route)\"></router-view>\n                      </keep-alive>\n                                            \n                      <router-view  v-else-if=\"!isRouterAlive && activeIndex===item.route\"></router-view>\n                      \n                 \n                </transition>\n              </el-col>\n          \n\t\t\t        </el-tab-pane>\n            </el-tabs>\n\n          </div>\n              <!-- 子页面容器 -->\n              <el-dialog   :title=\"subPageTitle\" :visible.sync='subDialogVisible' @close=\"closeDialog\" ref=\"_op_dialog_ctn\">\n                <transition name=\"fade\" mode=\"out-in\"  v-if=\"subDialogVisible\">                  \n                  <sub-page-ctn :page=\"subPageHref\" :params=\"subPageParams\" v-if=\"subDialogVisible\" ></sub-page-ctn> \n                </transition>        \n                <div slot='footer' class='dialog-footer'>\n                <el-button @click=\"cancel\" v-if=\"subFooter('cancel')\" >取消</el-button>\n                <el-button type='primary' v-if=\"subFooter('confirm')\" @click=\"confirm\">确定</el-button >\n                </div> \n            </el-dialog>\n             <!-- 子页面容器 -->\n        </div>\n      </section>\n    </el-col>\n      <right-menu :menuData=\"rightMenuData\"  :eventHandler=rightClickHandler  v-on:handleSelect= \"handleRightSelect\"></right-menu> \n  </el-row>\n</template>\n<script>\n\n    \nimport {getMenuRoutes,addMenuToRoutes,mixins} from '@v2-lib/vue.spa.plugin'\nimport { getRoutersList } from '@/api/api.js'\nimport {caseRouter} from '@/api/case.js'\n\nconst caseList= process.env.NODE_ENV === 'production'?[]:caseRouter;\nexport default {\n  name:'layout',\n  data() {\n    return {\n      routerData:JSON.parse(JSON.stringify(getMenuRoutes())),\n      sysLogo:\"img/logo.png\",\n      sysName: \"AWEB_ADMIN\",\n      collapsed: false,\n      sysUserName: \"admin\",\n      sysUserAvatar: \"https://s.gravatar.com/avatar/f30a9191dda93b5389965ed99f57f850?s=50&d=retro\",  \n      rightClickHandler:null,\n      isRouterAlive: true,\n      clickTab: false\n    };\n  },\n\n async beforeRouteEnter(to, from, next){\n      let transformMenu=(list)=>{\n        var context = this;\n          let menus = [],\n              menuObj = {},\n              menuParent = {},\n              result = list||[];\n\n          if(result.length){\n            result.sort((a,b)=>{\n              return parseInt(a.seq,10)-parseInt(b.seq,10);\n            }).map(i=>{\n              !i.pid&&(i.pid='');\n              let p=menuObj[i.pid];\n              if(!p){\n                p=menuObj[i.pid]={\n                  id:i.pid,\n                  children:[]\n                }\n              }else{\n                !p.children&&(p.children=[]);\n              }\n              let item=menuObj[i.id]||{\n                id:i.id,\n                //children:[]\n              };\n              item.pid=i.pid||\"\";\n              item.name = i.id;\n              item.path = i.id;\n              item.component=i.value;\n              item.meta ={title:i.name,icon:i.icon};\n              menuObj[i.id]=item;\n              p.children.push(item);\n            });\n\n            Object.keys(menuObj)\n                .filter(e=>!menuObj[e].children)\n                .map(e=>delete menuObj[e]);\n\n            return menuObj[''].children;\n          \n          }\n      };\n      let getMenu=()=>{\n        return new Promise((resolve,reject)=>{\n              getRoutersList().then(res => {\n                if(res && res.status){\n                  var list = res&&res.content&&res.content.menus||[];\n                  let menu = transformMenu(list);\n                  resolve(menu);                  \n                }else{\n                  reject()\n                }\n\n          })\n        })\n      };\n      try{\n\n        let menus=getMenuRoutes();\n        if(!menus.length){\n          let menus=await getMenu();\n          let path = to.redirectedFrom || to.path;\n          let menuData=[...menus,...caseList];\n          addMenuToRoutes(menuData);\n          next(path);\n        }else{\n          next()\n        }\n      }catch(e){\n      \n      console.log(e);\n        next();\n      }\n\n },\n  mixins:[mixins],\n\n  methods: {\n    beforeClose(){\n      console.log(\"333\")\n      return true;\n    },\n    handleSelectMenu:function(key, keyPath){\n       console.log('key',key);\n\n      let keys = key.split('#'),\n          path = keys[0],\n          page = keys[1],\n          title= keys[2];\n\n\n       this.open({\n         path:'/'+path,\n         page:page,\n         status:true,\n         type:'BLANK',\n         title:title||'标题',\n         keepAlive:true\n       })\n\n\n    },\n    tabRightClick: function(e) {\n      if (e.target.classList[0] === \"el-tabs__item\") {\n        e.stopPropagation();\n        e.preventDefault();\n        this.rightClickHandler = e;\n        // this.rightClickTaget\n\n      }else{\n        return true;\n      }\n    },\n    reload() {\n   \n          this.isRouterAlive = false;\n         \n          this.$nextTick(function () {\n              this.isRouterAlive = true\n          })\n        },\n    handleRightSelect:function(key){\n        // let id= this.rightClickHandler&& this.rightClickHandler.toElement.id,activeIndex;\n        // if(id){\n        //   id=id.replace('tab-','');\n        // }\n        let  activeIndex=this.activeIndex;\n\n       switch(key){\n         case'refresh':\n      \n         this.reload();\n            \n          break;\n         case'close':\n            let targetRoute=this.getCurrentRouteMatched(activeIndex);\n            targetRoute.instances.default.close({path:activeIndex});\n           break;  \n           case'closeLeft':\n\n            if (this.openedTabs && this.openedTabs.length >= 1) {\n\n              this.$store.commit(\"delete_left_tabs\", activeIndex);\n             \n            }\n           break;\n          case'closeRight':\n\n            if (this.openedTabs && this.openedTabs.length >= 1) {\n\n              this.$store.commit(\"delete_right_tabs\", activeIndex);\n             \n            }\n         \n           break;\n\n         case'closeAll':\n           this.$store.commit(\"delete_allTabs\");\n           break;\n\n       }\n\n    },\n    logout: function() {\n      var _this = this;\n      this.$confirm(\"确认退出吗?\", \"提示\", {\n      })\n        .then(() => {\n          this.$deleteAxios(`${this.$axios.server}/signOut.do`, {}).then(function(\n            data\n          ) {\n            if (data.status) {\n              sessionStorage.removeItem(\"user\");\n              _this.$router.push(\"/login\");\n              // global.pageMap = {};\n            } else {\n              _this.$notify.error({\n                title: \"退出登录失败\"\n              });\n            }\n          });\n        })\n        .catch(() => {});\n    },\n    collapse: function() {\n      this.collapsed = !this.collapsed;\n    },\n    tabClick(tab) {\n      this.clickTab = true;\n      this.$router.push({ path: this.activeIndex,query:this.URLQueryMap[this.activeIndex] ||{}});\n\n    },\n    tabRemove(targetName) {\n      \n       let targetRoute=this.getCurrentRouteMatched (targetName);\n      targetRoute.instances.default.close({path:targetName});\n\n     \n    },\n\n    getCurrentRouteMatched(targetName ){\n        let currentRoute= this.$router.match(targetName)\n        let matched=currentRoute.matched.filter(item=>item.path===currentRoute.path)  \n        return matched[0];\n    },\n\n  \n    cancel(){         \n           this.closeDialog();\n           this.$store.commit(\"do_cancel\");        \n    },\n    confirm(){\n          this.closeDialog(); \n          this.$store.commit(\"do_confirm\");       \n    },\n    closeDialog(){\n       this.$store.commit(\"set_D_visible\",false);    \n       this.$store.commit(\"set_active_index\", this.activeIndex);\n    },\n    openMarket(arg){\n      if(arg==='end'){\n         window.open('https://market.awebide.com/package/@aweb-initApp/springboot');\n      }else if(arg==='endDoc'){\n          window.open('https://vue-api.awebide.com/swagger-ui.html#/');\n      }else{\n        window.open('https://www.awebide.com:7002/package/@aweb-template/vue-spa');\n      }\n     \n    }\n   \n  },\n\n  \n  mounted() {\n    // this.getMenu();\n    let user = sessionStorage.getItem(\"user\");\n   \n    if (user) {\n      user = JSON.parse(user);\n      this.sysUserName = user.name || \"\";\n      this.sysUserAvatar = user.avatar || \"\";\n    }\n     this.$store.commit(\"add_tabs\", {\n        route: this.$route.path,\n        name: this.$route.meta.title\n        \n      });\n    \n    this.$store.commit(\"set_active_index\", this.$route.path);\n\n  },\n  computed: {\n    openedTabs() {\n\n      return this.$store.state.openedTabs;\n    },\n    activeIndex: {\n      get() {\n        return this.$store.state.activeIndex;\n      },\n      set(val) {\n        this.$store.commit(\"set_active_index\", val);\n      }\n    },\n     subDialogVisible: {\n        get() {\n          return this.$store.state.subDialogVisible;\n        },\n        set(val) {\n          this.$store.commit(\"set_D_visible\", val);\n        }\n     },\n     subPageHref: {\n        get() {\n          return this.$store.state.subPageHref;\n        },\n        set(val) {\n          this.$store.commit(\"set_subPageHref\", val);\n        }\n     },\n    subPageParams: {\n        get() {\n          return this.$store.state.subPageParams;\n        },\n        set(val) {\n          this.$store.commit(\"set_subPageParams\", val);\n        }\n     },\n     subPageTitle:{\n       get() {\n          return this.$store.state.subPageTitle;\n        },\n        set(val) {\n          this.$store.commit(\"set_subPageTitle\", val);\n        }\n     },\n    rightMenuData() {\n       return this.$store.state.rightMenuData;\n    },\n    URLQueryMap:{\n      get() {\n        return this.$store.state.URLQueryMap;\n      },\n      set(val) {\n        this.$store.commit(\"set_url_map\", val);\n      }\n    },\n    subFooter(type){\n       return (type)=>{\n         return  this.$store.getters.subPageFooter(type);\n       }\n    }\n  },\n  watch: {\n    $route(to, from) {\n      let flag = false;\n     \n      if(to.meta.type ==='BLANK'){\n        if(Object.keys(to.query).length){\n            this.$store.commit(\"set_url_map\",({path:to.path,query:to.query}))\n          }\n      }\n      if (this.clickTab) {\n\n        this.$store.commit(\"set_active_index\", to.path);\n        this.clickTab = false;\n\n      } else {\n      if(to.meta.type==='BLANK' || !to.meta.type){\n        for (let item of this.openedTabs) {\n                if (item.route === to.path) {\n                  this.$store.commit(\"set_active_index\", to.path);\n                  flag = true;\n                  break;\n                }\n              }\n      \n          if (!flag) {\n            this.$store.commit(\"add_tabs\", { \n              route: to.path, \n              name: to.meta.title,\n              keepAlive:to.meta.keepAlive\n\n            });\n            this.$store.commit(\"set_active_index\", to.path);\n          }\n      }else if(to.meta.type==='SELF'){\n    \n          this.$store.commit(\"add_tabs\", {\n             route: to.path,\n             name: to.meta.title,\n             keepAlive:to.meta.keepAlive\n           });\n          this.$store.commit(\"set_active_index\",to.path);\n          this.$store.commit(\"delete_tabs\", from.path);\n       \n      }\n    }\n\n     \n    },\n \n    subDialogVisible:{\n       immediate:true,\n       handler(newVal, oldVal){\n           if(!newVal && oldVal){\n             let currentRoute=this.$router.currentRoute;\n              let matched=currentRoute.matched.filter(item=>item.path===currentRoute.path)  \n              let currentPageConfig =  matched[0].components.default;\n              let currentPageIns = matched[0].instances.default;\n               currentPageConfig.resume && currentPageConfig.resume.call(currentPageIns);                \n           }\n       }\n    }\n  }\n\n};\n</script>\n\n<style  lang=\"less\">\n.aweb-container {\n  position: absolute;\n  top: 0px;\n  bottom: 0px;\n  width: 100%;\n  background-color: #f0f2f5;\n  .aweb-header {\n    line-height: 64px;\n    background: #fff;\n    height: 64px;\n    box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);\n    border-right: none;\n    border-bottom: 1px solid #e6e6e6;\n    list-style: none;\n    position: relative;\n    margin: 0;\n    padding-left: 0;\n    .aweb-userinfo {\n      text-align: right;\n      padding-right: 35px;\n      float: right;\n      .aweb-userinfo-inner {\n        cursor: pointer;\n        img {\n          width: 40px;\n          height: 40px;\n          border-radius: 20px;\n          margin: 10px 0px 10px 10px;\n          float: right;\n        }\n      }\n      .aweb-download-btn{\n        margin-right: 1em;\n      }\n    }\n    .aweb-logo {\n      height: 64px;\n      font-size: 22px;\n      padding-left: 20px;\n      padding-right: 20px;\n      img {\n        width: 40px;\n        float: left;\n        margin: 10px 10px 10px 18px;\n      }\n      .txt {\n        color: rgb(14, 9, 9);\n      }\n    }\n    .logo-width,\n    .logo-collapse-width {\n      background-color: #152028;\n      color: #fff;\n      box-shadow: 2px 0 6px rgba(0,21,41,.35);  \n      transition: width .28s;\n      }\n      .logo-collapse-width {\n        width: 64px;\n      }\n      .logo-width {\n      width: 230px;\n      }\n    .aweb-tools {\n      padding: 0px 23px;\n      width: 14px;\n      height: 64px;\n      line-height: 64px;\n      cursor: pointer;\n    }\n  }\n  .aweb-body {\n    position: absolute;\n    top: 64px;\n    bottom: 0px;\n    overflow: hidden;\n    aside {\n\t  width: 230px;\n\t\tbox-shadow: 2px 0 6px rgba(0,21,41,.35);\n    transition: width .28s;\n    //  position:absolute;\n    height: 100%;\n      .el-menu {\n      height: 100%;\n      border-right: 0;\n  \n      \n      }\n      a.router-link-exact-active.router-link-active{\n        text-decoration: none;\n      }\n      .el-menu-item{\n         &:hover{\n            i{\n                color: #fff;\n            }\n         }\n         &.is-active:hover{\n             color: #fff !important;\n         }\n      }\n      .el-submenu{\n           [class*=\"fa \"]{\n           \n            margin-right: 9px;\n            font-size: 18px;\n            margin-left: 4px;\n           }\n          &:hover{\n            .el-submenu__title i{\n               color: #fff;\n            } \n          }\n      }\n    }\n    .menu-collapsed {\n    \n      width: 64px;\n      transition: width .28s;\n      &+.aweb-ctt{\n        margin-left: 64px;\n        transition: margin-left .5s;\n      }\n    }\n    .menu-expanded {\n    \n      width: 230px;\n       transition: width .5s;\n       &+.aweb-ctt{\n        margin-left: 230px;\n        transition: margin-left .28s;;\n      }\n    }\n\n  }\n   .aweb-ctt {\n  \n      overflow: auto;\n      padding: 10px;\n      margin-left: 230px;\n      position: absolute;\n      left: 0;\n      right: 0;\n      top:0;\n      .breadcrumb-container {\n        .title {\n          width: 200px;\n          float: left;\n          color: #475669;\n        }\n        .breadcrumb-inner {\n          float: right;\n        }\n      }\n      .aweb-ctt-wrap {\n        background-color: #fff;\n        box-sizing: border-box;\n        padding:20px;\n      }\n      .grid-content{\n           >div>div.el-tabs>.el-tabs__content{\n              height: calc(100vh - 125px);\n              overflow: auto;\n              padding: 0;\n           }\n           .el-tabs__item:focus, \n           .el-tabs__item:focus:active,\n           .el-tabs__item:active:focus{\n                 outline: none;\n                outline-color: transparent;\n           }\n      }\n     \n    }\n    .el-menu-vertical-demo:not(.el-menu--collapse) {\n    width: 230px;\n    min-height: 400px;\n  }\n}\n</style>"]}]}